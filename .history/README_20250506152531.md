# Heroku Worker App with Bull MQ

A simple Node.js application with Express and Bull MQ that runs on Heroku. It implements the worker queue pattern with Redis for background job processing.

## Architecture

This app consists of two processes:

1. **Web process** (`index.js`): An Express server that serves the API endpoints and adds jobs to the Redis queue
2. **Worker process** (`worker.js`): A Node.js process that consumes jobs from the Redis queue and executes them

The worker process uses the `throng` module to create multiple worker processes based on the `WEB_CONCURRENCY` environment variable, which Heroku sets automatically.

## Setup

1. Create a Heroku app:
```
heroku create
```

2. Add Redis to your Heroku app:
```
heroku addons:create heroku-redis:mini
```

3. Deploy to Heroku:
```
git push heroku main
```

4. Ensure both web and worker dynos are running:
```
heroku ps:scale web=1 worker=1
```

## Usage

To trigger a job, send a POST request to `/trigger-webhook`:

```
curl -X POST https://your-app-name.herokuapp.com/trigger-webhook
```

This will add a job to the Redis queue, which will be processed by the worker dyno. The worker will then call the configured webhook URL.

## Monitoring

You can view the logs to monitor job processing:

```
heroku logs --tail
``` 